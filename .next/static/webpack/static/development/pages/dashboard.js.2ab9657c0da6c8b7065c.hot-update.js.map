{"version":3,"file":"static/webpack/static\\development\\pages\\dashboard.js.2ab9657c0da6c8b7065c.hot-update.js","sources":["webpack:///./pages/dashboard.js"],"sourcesContent":["import Link from 'next/link';\r\nimport React, { Component } from 'react';\r\nimport fetch from 'isomorphic-unfetch';\r\nimport {DataTable} from 'primereact/datatable';\r\nimport {Column} from 'primereact/column';\r\nimport {InputText} from 'primereact/inputtext';\r\n// import {Dropdown} from 'primereact/dropdown';\r\n// import {Growl} from 'primereact/growl';\r\nimport {Calendar} from 'primereact/calendar';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\nconst baseUrl = 'http://127.0.0.1:4000/';\r\n\r\nclass Dashboard extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n\t\t\t\t\tdata: []\r\n        };\r\n\t\t\t\r\n        this.textEditor = this.textEditor.bind(this);\r\n        this.dateTemplate = this.dateTemplate.bind(this);\r\n        this.calendarEditor = this.calendarEditor.bind(this);\r\n        this.requiredValidator = this.requiredValidator.bind(this);\r\n    }\r\n\r\n    async componentDidMount() {\r\n\t\tconst res = fetch(`${baseUrl}policies`).then( r => r.json() ).then(data => this.setState({data: data}));\r\n    }\r\n\r\n    onEditorValueChange(props, value) {\r\n        let updatedData = [...props.value];\r\n        updatedData[props.rowIndex][props.field] = value;\r\n        this.setState({data: updatedData});\r\n    }\r\n    dateTemplate(rowData, column) {\r\n        return moment(rowData['effective_date']).format(\"MM-DD-YYYY\");\r\n    }\r\n\r\n    inputTextEditor(props, field) {\r\n        return <InputText type=\"text\" value={props.rowData[field]} onChange={(e) => this.onEditorValueChange(props, e.target.value)} />;\r\n    }\r\n\r\n    textEditor(props) {\r\n\t\tthis.postData()\r\n        return this.inputTextEditor(props, props.field);\r\n\t}\r\n\t\t\r\n\tpostData = () => {\r\n\t\taxios.post(`${baseUrl}policies`, this.state.data)\r\n\t\t\t.then(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t})\r\n\t}\r\n\r\n\tcalendarEditor(props, field){\t\r\n\t\treturn <InputText type=\"text\" value={moment(props.rowData[field]).format(\"MM/DD/YYYY\")} onChange={(e) => this.onEditorValueChange(props, e.target.value)} />\r\n\t}\r\n\r\n    requiredValidator(props) {\r\n        let value = props.rowData[props.field];\r\n        return value && value.length > 0;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n              <Link href=\"/\"><a title=\"New Policy\">Create new policy</a></Link>\r\n                <div className=\"content-section implementation\">\r\n                    <Growl ref={(el) => this.growl = el} />\r\n                    <DataTable value={this.state.data} editable={true}>\r\n                        <Column field=\"first_name\" header=\"First Name\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                        <Column field=\"last_name\" header=\"Last Name\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                        <Column field=\"email_address\" header=\"Email Address\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                        <Column field=\"phone_number\" header=\"Phone Number\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                        <Column field=\"company_name\" header=\"Company Name\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                        <Column \r\n                         field=\"effective_date\" body={this.dateTemplate} header=\"Effective Date\" editor={this.calendarEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Dashboard"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAmCA;AAEA;AACA;AACA;AACA;AAtCA;AACA;AADA;AAIA;AACA;AACA;AACA;AATA;AAUA;AACA;;;;;;;;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;;;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;;;AASA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;AAtEA;AACA;AAwEA;;;;A","sourceRoot":""}