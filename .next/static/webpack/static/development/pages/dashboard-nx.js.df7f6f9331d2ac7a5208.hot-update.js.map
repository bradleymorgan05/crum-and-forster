{"version":3,"file":"static/webpack/static\\development\\pages\\dashboard-nx.js.df7f6f9331d2ac7a5208.hot-update.js","sources":["webpack:///./pages/dashboard-nx.js"],"sourcesContent":["import Link from 'next/link';\r\nimport React, { Component } from 'react';\r\nimport fetch from 'isomorphic-unfetch';\r\nimport {DataTable} from 'primereact/datatable';\r\nimport {Column} from 'primereact/column';\r\nimport {InputText} from 'primereact/inputtext';\r\nimport {Dropdown} from 'primereact/dropdown';\r\nimport {Growl} from 'primereact/growl';\r\nimport {Calendar} from 'primereact/calendar';\r\nimport Dashboard from './dashboard';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\nconst baseUrl = 'http://127.0.0.1:4000/';\r\n\r\nclass DashboardNX extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n\t\t\t\t\tdata: []\r\n        };\r\n\t\t\t\r\n        this.textEditor = this.textEditor.bind(this);\r\n        this.dateTemplate = this.dateTemplate.bind(this);\r\n        this.yearEditor = this.yearEditor.bind(this);\r\n        this.brandEditor = this.brandEditor.bind(this);\r\n        this.colorEditor = this.colorEditor.bind(this);\r\n        this.requiredValidator = this.requiredValidator.bind(this);\r\n\r\n        this.editorForRowEditing = this.editorForRowEditing.bind(this);\r\n        this.onRowEditorValidator = this.onRowEditorValidator.bind(this);\r\n        this.onRowEditInit = this.onRowEditInit.bind(this);\r\n        this.onRowEditSave = this.onRowEditSave.bind(this);\r\n        this.onRowEditCancel = this.onRowEditCancel.bind(this);\r\n    }\r\n\r\n    async componentDidMount() {\r\n\t\tconst res = fetch(`${baseUrl}policies`).then( r => r.json() ).then(data => this.setState({data: data}));\r\n    }\r\n\r\n    /* Cell Editing */\r\n    onEditorValueChange(props, value) {\r\n        let updatedData = [...props.value];\r\n        updatedData[props.rowIndex][props.field] = value;\r\n        this.setState({data: updatedData});\r\n    }\r\n    dateTemplate(rowData, column) {\r\n        return moment(rowData['effective_date']).format(\"MM-DD-YYYY\");\r\n    }\r\n\r\n    inputTextEditor(props, field) {\r\n        return <InputText type=\"text\" value={props.rowData[field]} onChange={(e) => this.onEditorValueChange(props, e.target.value)} />;\r\n    }\r\n\r\n    textEditor(props) {\r\n\t\t\tconsole.log(props)\r\n\t\t\tthis.postData()\r\n      return this.inputTextEditor(props, props.field);\r\n\t}\r\n\t\t\r\n\t\tpostData = () => {\r\n\t\t\tconsole.log(this.state.data)\r\n\t\t\taxios.post(`${baseUrl}policies`, this.state.data)\r\n\t\t\t.then(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tconsole.log(111);\r\n\t\t\t\t//console.log(res.data);\r\n\t\t\t})\r\n\t}\r\ncalendarEditor(props){\r\n    return <Calendar value={props.rowData[field]}  onChange={(e) => this.onEditorValueChange(props, e.target.value)}></Calendar>\r\n}\r\n    yearEditor(props) {\r\n        // console.log('fields->>>>>>',props.field)\r\n        return this.inputTextEditor(props, 'year');\r\n    }\r\n\r\n\r\n    brandEditor(props) {\r\n        let brands = [\r\n            {label: 'Audi', value: 'Audi'},\r\n            {label: 'BMW', value: 'BMW'},\r\n            {label: 'Fiat', value: 'Fiat'},\r\n            {label: 'Ford', value: 'Ford'},\r\n            {label: 'Honda', value: 'Honda'},\r\n            {label: 'Jaguar', value: 'Jaguar'},\r\n            {label: 'Mercedes', value: 'Mercedes'},\r\n            {label: 'Renault', value: 'Renault'},\r\n            {label: 'VW', value: 'VW'},\r\n            {label: 'Volvo', value: 'Volvo'}\r\n        ];\r\n\r\n        return (\r\n            <Dropdown value={props.value[props.rowIndex].brand} options={brands}\r\n                    onChange={(e) => this.onEditorValueChange(props, e.value)} style={{width:'100%'}} placeholder=\"Select a City\"/>\r\n        );\r\n    }\r\n\r\n    colorEditor(props) {\r\n        return this.inputTextEditor(props, 'color');\r\n    }\r\n\r\n    requiredValidator(props) {\r\n        let value = props.rowData[props.field];\r\n        return value && value.length > 0;\r\n    }\r\n\r\n    /* Row Editing */\r\n    onEditorValueChangeForRowEditing(props, value) {\r\n        let updatedCars = [...props.value];\r\n        updatedCars[props.rowIndex][props.field] = value;\r\n        this.setState({cars2: updatedCars});\r\n    }\r\n\r\n    editorForRowEditing(props, field) {\r\n        return <InputText type=\"text\" value={props.rowData[field]} onChange={(e) => this.onEditorValueChangeForRowEditing(props, e.target.value)} />;\r\n    }\r\n\r\n    onRowEditorValidator(rowData) {\r\n        let value = rowData['brand'];\r\n        return value.length > 0;\r\n    }\r\n\r\n    onRowEditInit(event) {\r\n        this.clonedCars[event.data.vin] = {...event.data};\r\n    }\r\n\r\n    onRowEditSave(event) {\r\n        if (this.onRowEditorValidator(event.data)) {\r\n            delete this.clonedCars[event.data.vin];\r\n            this.growl.show({severity: 'success', summary: 'Success', detail: 'Car is updated'});\r\n        }\r\n        else {\r\n            this.growl.show({severity: 'error', summary: 'Error', detail: 'Brand is required'});\r\n        }\r\n    }\r\n\r\n    onRowEditCancel(event) {\r\n        let cars = [...this.state.cars2];\r\n        cars[event.index] = this.clonedCars[event.data.vin];\r\n        delete this.clonedCars[event.data.vin];\r\n        this.setState({\r\n            cars2: cars\r\n        })\r\n    }\r\n\r\n    render() {\r\n\t\t\tconsole.log(this.state.data)\t\r\n        return (\r\n            <div>\r\n                \t\t\t<Link href=\"/\">\r\n\t\t\t\t<a title=\"New Policy\">Create new policy</a>\r\n\t\t\t</Link>\r\n                <div className=\"content-section implementation\">\r\n                    <Growl ref={(el) => this.growl = el} />\r\n\r\n                    <h3>Cell Editing</h3>\r\n                    <DataTable value={this.state.data} editable={true}>\r\n                        <Column field=\"first_name\" header=\"first_name\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                        <Column field=\"last_name\" header=\"last_name\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                        <Column field=\"email_address\" header=\"email_address\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                        <Column field=\"phone_number\" header=\"phone_number\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                        <Column field=\"company_name\" header=\"company_name\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                        <Column \r\n                         field=\"effective_date\" body={this.dateTemplate} header=\"effective_date\" editor={this.textEditor} editorValidator={this.requiredValidator} style={{height: '3.5em'}}/>\r\n                    </DataTable>\r\n\r\n                    {/* <h3>Row Editing</h3>\r\n                    <DataTable value={this.state.data} editMode=\"row\" rowEditorValidator={this.onRowEditorValidator} onRowEditInit={this.onRowEditInit} onRowEditSave={this.onRowEditSave} onRowEditCancel={this.onRowEditCancel}>\r\n                        <Column field=\"first_name\" header=\"first_name\" style={{height: '3.5em'}}/>\r\n                        <Column field=\"last_name\" header=\"last_name\" editor={(props) => this.editorForRowEditing(props, 'year')} style={{height: '3.5em'}}/>\r\n                        <Column field=\"email_address\" header=\"email_address\" editor={(props) => this.editorForRowEditing(props, 'brand')} style={{height: '3.5em'}}/>\r\n                        <Column field=\"phone_number\" header=\"phone_number\" editor={(props) => this.editorForRowEditing(props, 'color')} style={{height: '3.5em'}}/>\r\n                        <Column field=\"company_name\" header=\"company_name\" editor={(props) => this.editorForRowEditing(props, 'color')} style={{height: '3.5em'}}/>\r\n                        <Column field=\"effective_date\" header=\"effective_date\" editor={(props) => this.editorForRowEditing(props, 'color')} style={{height: '3.5em'}}/>\r\n                        <Column field=\"status\" header=\"status\" editor={(props) => this.editorForRowEditing(props, 'color')} style={{height: '3.5em'}}/>\r\n                        <Column rowEditor={true} style={{'width': '70px', 'textAlign': 'center'}}></Column>\r\n                    </DataTable> */}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DashboardNX"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AA6CA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAnDA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAjBA;AAkBA;AACA;;;;;;;;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;AAEA;AACA;;;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;;;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AACA;;;AAWA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AACA;AACA;AACA;AACA;;;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAEA;AACA;;;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;;;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;;;;AAvKA;AACA;AAyKA;;;;A","sourceRoot":""}